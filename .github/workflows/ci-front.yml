name: Front Continuous Integration

on:
  pull_request:

jobs:
  lint:
    name: ğŸ‘® Lint & Typecheck
    runs-on: ubuntu-latest
    env:
      GQL_HOST: https://api-6zdezivzkq-ey.a.run.app
    steps:
      - uses: actions/checkout@v4
      - name: ğŸ¥Ÿ Install bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: '1.2.9'
      - run: bun install
      - run: bun --cwd front biome ci
      - run: bun --cwd front typecheck


  storybook-test:
    name: ğŸ“– Test storybook
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: ğŸ¥Ÿ Install bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: '1.2.9'
      - run: bun install --cwd front
      - name: ğŸ–¥ï¸ Install Playwright
        run: bun --cwd front storybook:test:install
      - name: ğŸ“– Build Storybook
        run: bun --cwd front storybook:build
      - name: Serve Storybook and run tests
        run: bun --cwd front storybook:test
